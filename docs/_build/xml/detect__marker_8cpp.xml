<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.17">
  <compounddef id="detect__marker_8cpp" kind="file" language="C++">
    <compoundname>detect_marker.cpp</compoundname>
    <includes local="no">ros/ros.h</includes>
    <includes local="no">iostream</includes>
    <includes local="no">stdlib.h</includes>
    <includes local="yes">std_msgs/Float64.h</includes>
    <includes local="yes">std_msgs/MultiArrayLayout.h</includes>
    <includes local="yes">std_msgs/MultiArrayDimension.h</includes>
    <includes local="yes">std_msgs/Int32MultiArray.h</includes>
    <includes local="no">aruco/aruco.h</includes>
    <includes local="yes">control_msgs/JointControllerState.h</includes>
    <includes local="yes">joint_state_controller/joint_state_controller.h</includes>
    <includes local="yes">sensor_msgs/Image.h</includes>
    <includes local="no">cv_bridge/cv_bridge.h</includes>
    <includes local="no">sensor_msgs/image_encodings.h</includes>
    <includes local="no">opencv2/highgui/highgui.hpp</includes>
    <includes local="no">list</includes>
    <includes local="no">algorithm</includes>
    <includes refid="detect__marker_8h" local="yes">detect_marker.h</includes>
    <incdepgraph>
      <node id="16">
        <label>list</label>
      </node>
      <node id="10">
        <label>control_msgs/JointControllerState.h</label>
      </node>
      <node id="22">
        <label>std_msgs/Bool.h</label>
      </node>
      <node id="4">
        <label>stdlib.h</label>
      </node>
      <node id="7">
        <label>std_msgs/MultiArrayDimension.h</label>
      </node>
      <node id="12">
        <label>sensor_msgs/Image.h</label>
      </node>
      <node id="20">
        <label>string</label>
      </node>
      <node id="13">
        <label>cv_bridge/cv_bridge.h</label>
      </node>
      <node id="9">
        <label>aruco/aruco.h</label>
      </node>
      <node id="5">
        <label>std_msgs/Float64.h</label>
      </node>
      <node id="14">
        <label>sensor_msgs/image_encodings.h</label>
      </node>
      <node id="6">
        <label>std_msgs/MultiArrayLayout.h</label>
      </node>
      <node id="21">
        <label>vector</label>
      </node>
      <node id="11">
        <label>joint_state_controller/joint_state_controller.h</label>
      </node>
      <node id="2">
        <label>ros/ros.h</label>
      </node>
      <node id="19">
        <label>math.h</label>
      </node>
      <node id="15">
        <label>opencv2/highgui/highgui.hpp</label>
      </node>
      <node id="3">
        <label>iostream</label>
      </node>
      <node id="18">
        <label>detect_marker.h</label>
        <link refid="detect__marker_8h_source"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="19" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="20" relation="include">
        </childnode>
        <childnode refid="21" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
        <childnode refid="22" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
      <node id="17">
        <label>algorithm</label>
      </node>
      <node id="8">
        <label>std_msgs/Int32MultiArray.h</label>
      </node>
      <node id="1">
        <label>/root/ros_ws/src/EXPROBLAB_Assignment2/src/detect_marker.cpp</label>
        <link refid="detect__marker_8cpp"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
        <childnode refid="11" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
        <childnode refid="13" relation="include">
        </childnode>
        <childnode refid="14" relation="include">
        </childnode>
        <childnode refid="15" relation="include">
        </childnode>
        <childnode refid="16" relation="include">
        </childnode>
        <childnode refid="17" relation="include">
        </childnode>
        <childnode refid="18" relation="include">
        </childnode>
      </node>
    </incdepgraph>
      <sectiondef kind="var">
      <memberdef kind="variable" id="detect__marker_8cpp_1ae3b32ecec4590e38557f4c80e5ed58ed" prot="public" static="no" mutable="no">
        <type>std_msgs::Float64</type>
        <definition>std_msgs::Float64 msg</definition>
        <argsstring></argsstring>
        <name>msg</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/root/ros_ws/src/EXPROBLAB_Assignment2/src/detect_marker.cpp" line="49" column="19" bodyfile="/root/ros_ws/src/EXPROBLAB_Assignment2/src/detect_marker.cpp" bodystart="49" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="detect__marker_8cpp_1a8c1acd69538a2dc82fcc94e9942be30e" prot="public" static="no" mutable="no">
        <type>std::list&lt; int &gt;</type>
        <definition>std::list&lt;int&gt; marker_list</definition>
        <argsstring></argsstring>
        <name>marker_list</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/root/ros_ws/src/EXPROBLAB_Assignment2/src/detect_marker.cpp" line="52" column="11" bodyfile="/root/ros_ws/src/EXPROBLAB_Assignment2/src/detect_marker.cpp" bodystart="52" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="detect__marker_8cpp_1a49c04bb816c28cda15baf215e0f13cee" prot="public" static="no" mutable="no">
        <type>aruco::MarkerDetector</type>
        <definition>aruco::MarkerDetector mDetector_</definition>
        <argsstring></argsstring>
        <name>mDetector_</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/root/ros_ws/src/EXPROBLAB_Assignment2/src/detect_marker.cpp" line="54" column="23" bodyfile="/root/ros_ws/src/EXPROBLAB_Assignment2/src/detect_marker.cpp" bodystart="54" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="detect__marker_8cpp_1a0e3776f9f5d938830d69f7fe428d5c35" prot="public" static="no" mutable="no">
        <type>std::vector&lt; aruco::Marker &gt;</type>
        <definition>std::vector&lt;aruco::Marker&gt; markers_</definition>
        <argsstring></argsstring>
        <name>markers_</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/root/ros_ws/src/EXPROBLAB_Assignment2/src/detect_marker.cpp" line="55" column="13" bodyfile="/root/ros_ws/src/EXPROBLAB_Assignment2/src/detect_marker.cpp" bodystart="55" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="detect__marker_8cpp_1a5c9bd70cbf4ee05efa17860dc5913a09" prot="public" static="no" mutable="no">
        <type>aruco::CameraParameters</type>
        <definition>aruco::CameraParameters camParam_</definition>
        <argsstring></argsstring>
        <name>camParam_</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/root/ros_ws/src/EXPROBLAB_Assignment2/src/detect_marker.cpp" line="56" column="25" bodyfile="/root/ros_ws/src/EXPROBLAB_Assignment2/src/detect_marker.cpp" bodystart="56" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="detect__marker_8cpp_1a46a054ab4fc737d95a4b5555d51a761c" prot="public" static="no" mutable="no">
        <type>cv_bridge::CvImagePtr</type>
        <definition>cv_bridge::CvImagePtr cv_ptr</definition>
        <argsstring></argsstring>
        <name>cv_ptr</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/root/ros_ws/src/EXPROBLAB_Assignment2/src/detect_marker.cpp" line="58" column="23" bodyfile="/root/ros_ws/src/EXPROBLAB_Assignment2/src/detect_marker.cpp" bodystart="58" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="detect__marker_8cpp_1a3061dec99ad9aff2b1b5dfedb9fa9d5d" prot="public" static="no" mutable="no">
        <type>cv::Mat</type>
        <definition>cv::Mat inImage_</definition>
        <argsstring></argsstring>
        <name>inImage_</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/root/ros_ws/src/EXPROBLAB_Assignment2/src/detect_marker.cpp" line="59" column="9" bodyfile="/root/ros_ws/src/EXPROBLAB_Assignment2/src/detect_marker.cpp" bodystart="59" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="detect__marker_8cpp_1a4a453f22d3fcb344a1ed28eac4e484a5" prot="public" static="no" mutable="no">
        <type>double</type>
        <definition>double marker_size_</definition>
        <argsstring></argsstring>
        <name>marker_size_</name>
        <initializer>= 0.05</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/root/ros_ws/src/EXPROBLAB_Assignment2/src/detect_marker.cpp" line="60" column="8" bodyfile="/root/ros_ws/src/EXPROBLAB_Assignment2/src/detect_marker.cpp" bodystart="60" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="detect__marker_8cpp_1a3c04138a5bfe5d72780bb7e82a18e627" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int main</definition>
        <argsstring>(int argc, char **argv)</argsstring>
        <name>main</name>
        <param>
          <type>int</type>
          <declname>argc</declname>
        </param>
        <param>
          <type>char **</type>
          <declname>argv</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
<para>Main <parameterlist kind="param"><parameteritem>
<parameternamelist>
</parameternamelist>
<parameterdescription>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </inbodydescription>
        <location file="/root/ros_ws/src/EXPROBLAB_Assignment2/src/detect_marker.cpp" line="212" column="5" bodyfile="/root/ros_ws/src/EXPROBLAB_Assignment2/src/detect_marker.cpp" bodystart="212" bodyend="254"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
<para>Node responsible of moving the arm of the robot to detect the ArUco markers in the environment the robot is deployes into. </para>
    </briefdescription>
    <detaileddescription>
<para><simplesect kind="author"><para>Matteo Maragliano </para>
</simplesect>
<simplesect kind="version"><para>1.0 </para>
</simplesect>
<simplesect kind="date"><para>05/12/2023</para>
</simplesect>
<itemizedlist>
<listitem><para>Subscriber to: <linebreak/>
 /camera/rgb/image_raw Topic to retrieve the robot vision through the camera mounted on the 5-th link of the arm</para>
</listitem></itemizedlist>
</para>
<para>Publisher to: <linebreak/>
 /arm/yb_arm_joint_1_position_controller/command Topic to pub the joint 1 angle for the robot arm /arm/yb_arm_joint_2_position_controller/command Topic to pub the joint 2 angle for the robot arm /arm/yb_arm_joint_3_position_controller/command Topic to pub the joint 3 angle for the robot arm /arm/yb_arm_joint_4_position_controller/command Topic to pub the joint 4 angle for the robot arm /arm/yb_arm_joint_5_position_controller/command Topic to pub the joint 5 angle for the robot arm</para>
<para>/list_topic Topic in which it is published the list of all the markers detected by the robot</para>
<para>Description: The node is used to detect the ArUco markers that are in the environment. In particular, the robot is deployed in the E room and it has to remain still and detect all the 7 markers around him. To do so, it is provided an arm with a cam to have a better field of view. The arm is moved by publishing the angle of the respective 5 joints to cover 360 degrees and to detect all the markers correctly. Once the robot has finished its detection phase it publishes through the dedicated topic the list of all the markers such that the FSM running on the robot can process the information and start its patrolling behavior </para>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"></codeline>
<codeline lineno="30"><highlight class="preprocessor">#include<sp/>&lt;ros/ros.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;iostream&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdlib.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;std_msgs/Float64.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;std_msgs/MultiArrayLayout.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;std_msgs/MultiArrayDimension.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;std_msgs/Int32MultiArray.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;aruco/aruco.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;control_msgs/JointControllerState.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;joint_state_controller/joint_state_controller.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;sensor_msgs/Image.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;cv_bridge/cv_bridge.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;sensor_msgs/image_encodings.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;opencv2/highgui/highgui.hpp&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;list&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;algorithm&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;detect_marker.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight><highlight class="comment">//<sp/>poses<sp/>store</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal">std_msgs::Float64<sp/>msg;</highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight><highlight class="comment">//<sp/>declaring<sp/>list<sp/>for<sp/>marker<sp/>storing</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="52"><highlight class="normal">std::list&lt;int&gt;<sp/>marker_list;</highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal">aruco::MarkerDetector<sp/>mDetector_;</highlight></codeline>
<codeline lineno="55"><highlight class="normal">std::vector&lt;aruco::Marker&gt;<sp/>markers_;</highlight></codeline>
<codeline lineno="56"><highlight class="normal">aruco::CameraParameters<sp/>camParam_;</highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal">cv_bridge::CvImagePtr<sp/>cv_ptr;</highlight></codeline>
<codeline lineno="59"><highlight class="normal">cv::Mat<sp/>inImage_;</highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>marker_size_<sp/>=<sp/>0.05;</highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><ref refid="class_marker_detect_class_1a51dc37068ddee72c9f731b9cc8f9c986" kindref="member">MarkerDetectClass::MarkerDetectClass</ref>(ros::NodeHandle*<sp/>nodehandle):nh_(*nodehandle)</highlight></codeline>
<codeline lineno="63"><highlight class="normal">{</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/>ROS_INFO(</highlight><highlight class="stringliteral">&quot;in<sp/>class<sp/>constructor<sp/>of<sp/>MarkerDetectClass&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><ref refid="class_marker_detect_class_1a9ee2dc51223227082dcb04bef21c68ef" kindref="member">initializePublishers</ref>();</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><ref refid="class_marker_detect_class_1af39d273e475ffd5670c0983e53ad98d0" kindref="member">initializeSubscribers</ref>();</highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/>counter<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="77"><highlight class="normal">}</highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_marker_detect_class_1a9ee2dc51223227082dcb04bef21c68ef" kindref="member">MarkerDetectClass::initializePublishers</ref>()</highlight></codeline>
<codeline lineno="80"><highlight class="normal">{</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/>joint_1_pose_pub<sp/>=<sp/>nh_.advertise&lt;std_msgs::Float64&gt;(</highlight><highlight class="stringliteral">&quot;/arm/yb_arm_joint_1_position_controller/command&quot;</highlight><highlight class="normal">,1000);</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/>joint_2_pose_pub<sp/>=<sp/>nh_.advertise&lt;std_msgs::Float64&gt;(</highlight><highlight class="stringliteral">&quot;/arm/yb_arm_joint_2_position_controller/command&quot;</highlight><highlight class="normal">,1000);</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/>joint_3_pose_pub<sp/>=<sp/>nh_.advertise&lt;std_msgs::Float64&gt;(</highlight><highlight class="stringliteral">&quot;/arm/yb_arm_joint_3_position_controller/command&quot;</highlight><highlight class="normal">,1000);</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/>joint_4_pose_pub<sp/>=<sp/>nh_.advertise&lt;std_msgs::Float64&gt;(</highlight><highlight class="stringliteral">&quot;/arm/yb_arm_joint_4_position_controller/command&quot;</highlight><highlight class="normal">,1000);</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/>joint_5_pose_pub<sp/>=<sp/>nh_.advertise&lt;std_msgs::Float64&gt;(</highlight><highlight class="stringliteral">&quot;/arm/yb_arm_joint_5_position_controller/command&quot;</highlight><highlight class="normal">,1000);</highlight></codeline>
<codeline lineno="95"><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/>list_pub<sp/>=<sp/>nh_.advertise&lt;std_msgs::Int32MultiArray&gt;(</highlight><highlight class="stringliteral">&quot;/list_topic&quot;</highlight><highlight class="normal">,<sp/>1000);</highlight></codeline>
<codeline lineno="97"><highlight class="normal">}</highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_marker_detect_class_1af39d273e475ffd5670c0983e53ad98d0" kindref="member">MarkerDetectClass::initializeSubscribers</ref>()</highlight></codeline>
<codeline lineno="100"><highlight class="normal">{</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/>cam_sub<sp/>=<sp/>nh_.subscribe(</highlight><highlight class="stringliteral">&quot;/camera/rgb/image_raw&quot;</highlight><highlight class="normal">,<sp/>1000,<sp/>&amp;<ref refid="class_marker_detect_class_1aa85c5f7bdbd52db414a39ecb7627268d" kindref="member">MarkerDetectClass::cb_cam</ref>,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="111"><highlight class="normal">}</highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_marker_detect_class_1aa85c5f7bdbd52db414a39ecb7627268d" kindref="member">MarkerDetectClass::cb_cam</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>sensor_msgs::Image::ConstPtr&amp;<sp/>msg)</highlight></codeline>
<codeline lineno="114"><highlight class="normal">{</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/>aruco::MarkerDetector<sp/>mDetector_;</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/>std::vector&lt;aruco::Marker&gt;<sp/>markers_;</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/>camParam_<sp/>=<sp/>aruco::CameraParameters();</highlight></codeline>
<codeline lineno="128"><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/>cv_ptr<sp/>=<sp/>cv_bridge::toCvCopy(msg,<sp/>sensor_msgs::image_encodings::BGR8);</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/>inImage_<sp/>=<sp/>cv_ptr-&gt;image;</highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/>markers_.clear();</highlight></codeline>
<codeline lineno="133"><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/>mDetector_.detect(inImage_,<sp/>markers_,<sp/>camParam_,<sp/>marker_size_,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="135"><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/>std::cout<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;ID<sp/>detected:<sp/>&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(std::size_t<sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>markers_.size();<sp/>++i)</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>_id<sp/>=<sp/>markers_.at(i).id;</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/>std::cout<sp/>&lt;&lt;<sp/>_id<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;<sp/>&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!(std::find(marker_list.begin(),<sp/>marker_list.end(),<sp/>_id)<sp/>!=<sp/>marker_list.end()))</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>marker_list.push_back(_id);</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/>std::cout<sp/>&lt;&lt;<sp/>std::endl;</highlight></codeline>
<codeline lineno="145"><highlight class="normal">}</highlight></codeline>
<codeline lineno="146"><highlight class="normal"></highlight></codeline>
<codeline lineno="147"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_marker_detect_class_1a1fb9187ce94a1811419140d2057a9cea" kindref="member">MarkerDetectClass::_marker_find</ref>()</highlight></codeline>
<codeline lineno="148"><highlight class="normal">{</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(counter<sp/>!=<sp/>-1)</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(counter<sp/>&lt;<sp/>15)</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>msg.data<sp/>=<sp/>3.14;</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>joint_1_pose_pub.publish(msg);</highlight></codeline>
<codeline lineno="171"><highlight class="normal"></highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>msg.data<sp/>=<sp/>0.7;</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>joint_4_pose_pub.publish(msg);</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>counter++;</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="176"><highlight class="normal"></highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(counter<sp/>&gt;=<sp/>15<sp/>and<sp/>counter<sp/>&lt;<sp/>40)</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>msg.data<sp/>=<sp/>-3.14;</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>joint_1_pose_pub.publish(msg);</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>counter++;</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="183"><highlight class="normal"></highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(counter<sp/>&gt;=<sp/>40<sp/>and<sp/>counter<sp/>&lt;<sp/>65)</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>msg.data<sp/>=<sp/>3.14;</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>joint_1_pose_pub.publish(msg);</highlight></codeline>
<codeline lineno="188"><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>msg.data<sp/>=<sp/>-0.3;</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>joint_3_pose_pub.publish(msg);</highlight></codeline>
<codeline lineno="191"><highlight class="normal"></highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>msg.data<sp/>=<sp/>0.0;</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>joint_4_pose_pub.publish(msg);</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>counter++;</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>msg.data<sp/>=<sp/>-3.14;</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>joint_1_pose_pub.publish(msg);</highlight></codeline>
<codeline lineno="200"><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>msg.data<sp/>=<sp/>0.0;</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>joint_2_pose_pub.publish(msg);</highlight></codeline>
<codeline lineno="203"><highlight class="normal"></highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>msg.data<sp/>=<sp/>0.0;</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>joint_3_pose_pub.publish(msg);</highlight></codeline>
<codeline lineno="206"><highlight class="normal"></highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>counter<sp/>=<sp/>-1;<sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="210"><highlight class="normal">}</highlight></codeline>
<codeline lineno="211"><highlight class="normal"></highlight></codeline>
<codeline lineno="212"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="detect__marker_8cpp_1a3c04138a5bfe5d72780bb7e82a18e627" kindref="member">main</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>argc,</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>**argv)</highlight></codeline>
<codeline lineno="213"><highlight class="normal">{</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/>ros::init(argc,<sp/>argv,<sp/></highlight><highlight class="stringliteral">&quot;marker_detector&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="226"><highlight class="normal"></highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/>ros::NodeHandle<sp/>nh;</highlight></codeline>
<codeline lineno="228"><highlight class="normal"></highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/>ROS_INFO(</highlight><highlight class="stringliteral">&quot;main:<sp/>instantiating<sp/>an<sp/>object<sp/>of<sp/>type<sp/>MarkerDetectClass&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><ref refid="class_marker_detect_class" kindref="compound">MarkerDetectClass</ref><sp/><ref refid="class_marker_detect_class" kindref="compound">MarkerDetectClass</ref>(&amp;nh);</highlight></codeline>
<codeline lineno="231"><highlight class="normal"></highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/>ros::Rate<sp/>loop_rate(1);</highlight></codeline>
<codeline lineno="233"><highlight class="normal"></highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(ros::ok())</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="class_marker_detect_class" kindref="compound">MarkerDetectClass</ref>.counter<sp/>!=<sp/>-1)</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_marker_detect_class" kindref="compound">MarkerDetectClass</ref>.<ref refid="class_marker_detect_class_1a1fb9187ce94a1811419140d2057a9cea" kindref="member">_marker_find</ref>();</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>std_msgs::Int32MultiArray<sp/>_listArr;</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>k<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>&amp;i:<sp/>marker_list)</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_listArr.data.push_back(i);</highlight></codeline>
<codeline lineno="244"><highlight class="normal"></highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>publish<sp/>the<sp/>list</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_marker_detect_class" kindref="compound">MarkerDetectClass</ref>.list_pub.publish(_listArr);</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/>ros::spinOnce();</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/>loop_rate.sleep();</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="252"><highlight class="normal"></highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="254"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="/root/ros_ws/src/EXPROBLAB_Assignment2/src/detect_marker.cpp"/>
  </compounddef>
</doxygen>
